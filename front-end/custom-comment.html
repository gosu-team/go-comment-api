<div class="custom-comment-box">
  <div class="custom-comment-headline">
    Comment Box
  </div>
  <div class="custom-comment-description">
    I strongly recommended you to keep your keyboard and surf as fast as possible through this area.
  </div>

  <div class="custom-comment-holder">
    <div class="custom-comment-holder-avatar">
      <img id="login-avatar" src="https://avatars0.githubusercontent.com/u/0">
    </div>
    <div class="custom-comment-holder-input">
      <input type="text" name="name" id="custom-comment-name" placeholder="Your Name" />
      <input type="email" name="email" id="custom-comment-email" placeholder="name@company.com" />
      <textarea id="custom-comment-content" rows="3" placeholder="Write something for me"></textarea>

      <div class="custom-comment-holder-action">
        <div class="custom-comment-holder-info">This function supports markdown and related things.</div>
        <button id="custom-comment-button" class="custom-comment-button" onclick="sendComment();">Give a comment</button>
      </div>
    </div>
  </div>

  <div class="custom-comment-list">
    No comment.
  </div>
</div>

<!-- Custom Comment Js -->
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<script>
  var domainName = "youdomain.com";
  var pathName = "{{ page.url }}".replace(/\//g, '');

  function sendComment() {
    var content = $("#custom-comment-content").val();
    var name = $("#custom-comment-name").val();
    var email = $("#custom-comment-email").val();
    $.ajax({
      url: 'http://localhost:3000/api/comments',
      type: 'POST',
      data: JSON.stringify({
        Domain: domainName,
        Path: pathName,
        Content: content,
        Name: name,
        Email: email
      })
    }).done(function () {
      // Reload
      getComment();

      // Clear
      $("#custom-comment-content").val("");
    });
  }

  function getComment() {
    $.get(`http://localhost:3000/api/comments/${domainName}/${pathName}`, function (data) {
      var comments = data.reverse();

      if (comments.length) {
        // Clear div
        $("div.custom-comment-list").html("");

        // Parse to div
        comments.map(function (el) {
          $("div.custom-comment-list").append(`
            <div class="custom-comment-element">
              <div class="custom-comment-element-avatar">
                <a href="#"><img src="https://avatars0.githubusercontent.com/u/0"></a>
              </div>
              <div class="custom-comment-element-content">
                <div class="custom-comment-element-header">
                  <a href="mail:${el.email}"><span class="custom-comment-element-author">${el.name}</span></a> wrote on ${el.createdAt.replace('Z', ' ').replace('T', ' ')}
                </div>
                <div class="custom-comment-element-body">
                  ${el.content}
                </div>
              </div>
            </div>
          `);
        });
      } else {
        $("div.custom-comment-list").html("No comment.");
      }
    });
  }

  $(document).ready(getComment());
</script>

<!-- Custom Comment CSS -->
<style>
  .custom-comment-headline {
    display: block;
    font-size: 14pt;
    margin-bottom: 15px;
    text-align: center;
    text-transform: uppercase;
    font-weight: bold;
    color: #A03A1B;
  }

  .custom-comment-description {
    font-size: 12pt;
    margin-bottom: 30px;
    text-align: center;
  }

  .custom-comment-holder {
    display: flex;
    flex-direction: row;
    align-items: center;
  }

  .custom-comment-holder-avatar {
    flex-basis: 50px;
    width: 50px;
    height: 50px;
    margin-right: 15px;
  }

  .custom-comment-holder-input {
    flex: 1;
  }

  ::placeholder {
    font-size: 11pt;
  }

  .custom-comment-holder-input input, textarea  {
    padding: 15px;
    font-size: 11pt;
    width: 100%;
    border: 1px solid #F0F0F0;
    resize: vertical;
  }

  .custom-comment-holder-action {
    display: flex;
    flex-direction: row;
    align-items: center;
    width: 100%;
    background: #F0F0F0;
  }

  .custom-comment-holder-info {
    display: block;
    width: 100%;
    padding-left: 15px;
    font-size: 10pt;
  }

  .custom-comment-button {
    font-weight: bold;
    display: inline-block;
    border: 1px solid #505050;
    background-color: #505050;
    color: #FFF;
    padding: 10px 15px;
    margin-left: 0;
    font-size: 0.9em;
    cursor: pointer;
    white-space: nowrap;
  }

  .custom-comment-list {
    margin-top: 30px;
    padding: 0 30px;
  }

  .custom-comment-element {
    display: flex;
    flex-direction: row;
  }

  .custom-comment-element-avatar {
    flex-basis: 50px;
    margin-right: 15px;
  }

  .custom-comment-element-avatar img {
    width: 50px;
    height: 50px;
  }

  .custom-comment-element-content {
    flex: 1;
    background-color: #F0F0F0;
    padding: 15px;
    margin-bottom: 15px;
    border-left: 3px solid #222;
    word-break: break-all;
    hyphens: auto;
  }

  .custom-comment-element-header {
    font-size: 0.8em;
  }

  .custom-comment-element-author {
    color: #000;
    font-weight: bold;
  }
</style>